C51 COMPILER V9.54   MAIN                                                                  12/27/2022 15:52:20 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\keil5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main.l
                    -st) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "STC15F2K60S2.H"
   2          #include "ONEWIRE.H"
   3          
   4          char tik8ms; //Ê±¼ä±êÖ¾Î»£¬ÓÐ°Ë¸ö×´Ì¬Ã¿°ËºÁÃë¸üÐÂÒ»´Î
   5          char smg[8];// ÓÃÀ´´æ´¢Ã¿¸öÊýÂë¹ÜÏÔÊ¾µÄ¶«Î÷£¨¾ßÌåÏÔÊ¾Ê²Ã´²Î¿¼Êý×ét_display£©
   6          
   7          unsigned int wendu; //´æ´¢ÎÂ¶ÈÊýÖµ
   8          
   9          //ÏÂÃæÁ½¸ö±äÁ¿²»ÓÃ¼ÇÒä¿ÉÒÔ´ÓSTC¡ªISPÈí¼þÖÐ»ñÈ¡£¨ÓÒÉÏ½Ç±ßÀ¸µÄ -> STC¿ª·¢°å£¨ÊÔÑéÏä4Ê¾Àý³ÌÐò£©-> H595Çý¶¯ÊýÂ
             -ë¹Ü ¡ª> C£©
  10          
  11          /*************  ±¾µØ³£Á¿ÉùÃ÷    **************/
  12          char t_display[]={                       //±ê×¼×Ö¿â
  13          //   0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F
  14              0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F,0x77,0x7C,0x39,0x5E,0x79,0x71,
  15          //black  -     H    J    K    L    N    o   P    U     t    G    Q    r   M    y
  16              0x00,0x40,0x76,0x1E,0x70,0x38,0x37,0x5C,0x73,0x3E,0x78,0x3d,0x67,0x50,0x37,0x6e,
  17              0xBF,0x86,0xDB,0xCF,0xE6,0xED,0xFD,0x87,0xFF,0xEF,0x46};    //0. 1. 2. 3. 4. 5. 6. 7. 8. 9. -1
  18          
  19          char T_COM[]={0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80}; //Î»Âë
  20          
  21          
  22          //¶¨Ê±Æ÷ÅäÖÃ¿ÉÒÔ´ÓSTC¡ªISPÈí¼þÖÐµÄ¶¨Ê±Æ÷¼ÆËãÆ÷ÖÐ»ñµÃ £¨1ms 16Î»×Ô¶¯ÖØÔØ 1TÖ¸Áî¼¯£©
  23          //×¢Òâ×îºóÁ½ÐÐÐèÒª×ÔÐÐÌí¼Ó£¨  ET1 = 1; EA = 1;£©
  24          void Timer1Init(void)   //1ºÁÃë@12.000MHz
  25          {
  26   1        AUXR |= 0x40;   //¶¨Ê±Æ÷Ê±ÖÓ1TÄ£Ê½
  27   1        TMOD &= 0x0F;   //ÉèÖÃ¶¨Ê±Æ÷Ä£Ê½
  28   1        TL1 = 0x20;   //ÉèÖÃ¶¨Ê±³õÖµ
  29   1        TH1 = 0xD1;   //ÉèÖÃ¶¨Ê±³õÖµ
  30   1        TF1 = 0;    //Çå³ýTF1±êÖ¾
  31   1        TR1 = 1;    //¶¨Ê±Æ÷1¿ªÊ¼¼ÆÊ±
  32   1        ET1 = 1;                           //´ò¿ª¶¨Ê±Æ÷Ò»£¨ÐèÒª×ÔÐÐÌí¼Ó£©
  33   1        EA = 1;                            //´ò¿ªÖÐ¶Ï¿ª¹Ø£¨ÐèÒª×ÔÐÐÌí¼Ó£©
  34   1      }
  35          
  36          //ÊýÂë¹ÜÏÔÊ¾µ¥Ôª
  37          void SMG(char wei,char number)
  38          {
  39   1      P2=0XC0;P0=T_COM[wei];P2=0X00; //¶ÎÑ¡ 
  40   1      P2=0XE0;P0=~t_display[number];P2=0X00;//Î»Ñ¡£¨×¢ÒâSTCÌá¹©µÄÊÇ¹²ÒõÂëÊ¹ÓÃÊ±×¢ÒâÈ¡·´£©
  41   1      P0=0X00; //Ïû³ý¹íÓ°½¨Òé¼ÓÉÏ
  42   1      }
  43          
  44          int main (void)
  45          {
  46   1      P2=0X80;P0=0XFF;P2=0X00;//¹Ø±ÕLED
  47   1      P2=0XA0;P0=0X00;P2=0X00;//¹Ø±Õ¼ÌµçÆ÷ºÍ·äÃùÆ÷
  48   1      Timer1Init();//¶¨Ê±Æ÷Ò»³õÊ¼»¯
  49   1      while(1)
  50   1      {
  51   2      
  52   2      smg[0]=wendu/1000;
  53   2      smg[1]=wendu%1000/100+32;
C51 COMPILER V9.54   MAIN                                                                  12/27/2022 15:52:20 PAGE 2   

  54   2      smg[2]=wendu%100/10;
  55   2      smg[3]=wendu%10;
  56   2        
  57   2      smg[4]=16;smg[5]=16;smg[6]=16;smg[7]=16;
  58   2      wendu=(unsigned int)(read_temp()*100); //¶ÁÈ¡ÎÂ¶È
  59   2      }
  60   1      }
  61          
  62          void server ()interrupt 3  //¶¨Ê±Æ÷1·þÎñº¯ÊýÃû×Ö¿ÉËæÒâµ«ÊÇºóÃæÒ»¶¨Òª¼Ó interrupt 3£¨ÓÉÓÚÅäÖÃµÄ1ms£¬¼´Ã¿Ò»º
             -ÁÃë¾Í»á½øÈë´Ë·þÎñº¯Êý£©
  63          {
  64   1      tik8ms=tik8ms+1;   //ÈÃÆäÃ¿Ò»ºÁÃë×ÔÔöÒ»
  65   1      if(tik8ms==8)tik8ms=0; //ÏÞ¶¨ÆäÔÚ0-7Ñ­»·
  66   1      SMG(tik8ms,smg[tik8ms]); //Öð¸öË¢ÐÂÊýÂë¹Ü 
  67   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    231    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     62    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
